---
title: "ATEM MiniをM1 Macで使うメモ（ゲーム配信を例に）"
date: "2021-09-05"
tags: ["コンピュータ"]
---

### M1 MacでATEM Miniを使う

[ATEM Mini](https://www.blackmagicdesign.com/jp/products/atemmini/techspecs/W-APS-13)は、BlackMagic Design社の複数HDMI入力に対するビデオ（オーディオ）スイッチャー兼ミキサーです。1080pまでの解像度に対応しており、機器から送られてくるさまざまなフォーマットの映像の差をよしなにコンバートして、最終的にWebカメラとしてその映像と音声を垂れ流してくれます。

Webカメラとして動作する、つまりはUSB Video Classをしゃべっているということなので、私が使っているM1 Macでも普通に使えています。USB Video Classは大抵のOSがドライバを実装していると予想されるので、ARM64だとかx86だとか、プラットフォームはあんまり関係ないのかもしれません。

ただし、付属のコントロールソフトウェアはx86バイナリなので、Rosetta 2経由での実行になります。だからと言って何かトラブルがあるということは、今のところありません。というか、配信初心者が使うような機能はほとんどハードウェアボタンで解決してしまいますし、少し設定が必要になったとしても、設定はハードウェア側に記憶されるので、私のようなライトユースでは出番はあまりありません。

Macとの通信はUSB 2.0で行われますが、端子はM1 Mac同様Type-Cです。私は他の機器にもケーブルを使い回すことを考えて、Appleが出しているThunderbolt 3ケーブルを買いました。最近のケーブルは兎角ややこしいのですが、AppleのThunderbolt 3ケーブルはパッシブなのでUSB 3.1 Gen 2も流せるということで、用途にかなっています。

### SwitchやPS4 Proとの接続

私はこのATEM Miniを使って、主にゲームの映像をDiscordで友人たちに共有しています。よく共有するのはSwitchの映像ですが、たまにPS4 Proの映像もやったりします。

各機器を繋ぐ際には、TVでリアルタイムにゲームを表示しつつATEM Mini側へ映像を分配して録画する、という方法を使っています。そのため、HDMI分配器が必要になります。HDMI分配器は、[TECのTHDSP12X2-4K60S](http://tecnosite.co.jp/ja/splitter/195-thdsp12x2-4k60s.html)を使用しています。ATEM Mini側へは、こちらの設定で1080pへダウンコンバートして出力しています。ATEM Mini側でもダウンコンバートはしてくれるようなのですが、とりあえず。

Switchを使う分にはこれで問題ないのですが、PS4 ProはHDR信号が出力できます。テレビもHDRに対応しているものを持っているので、テレビでは常にHDRを使いたいところですが、ダウンコンバート機能を使っている場合には、HDR対応が自動で取れてしまうようです。ATEM Mini側が1080pで受けながら、テレビが4K60pで受けることはできます。

HDR対応はATEM Miniを繋がなければ復活するようなので、この分配器は色の変換機能が不十分であるということだと思います。この辺りを実装したものもあるみたいですが、非常に高価なため、諦めた次第です。まあPS4 Proの映像を配信するのは稀なので、いいっちゃいいんですが。

### Discordでの配信

Discordで配信する際は、OBSなどを経由せず表示させています。（MacのOBSはどうもうまく動かない……。）やり方は非常に簡単で、Webカメラの映像を配信するようにボタンを押すだけです。この時、映像が鏡になって表示されるのですが、他の人には正しく見えているようです。

ただし、一点だけ設定要素があります。音声入力は、Discord側でいろいろな処理をかけて、人の声を検出するようにしているようです。これが働いているとゲームの音がノイズとして認識されるようで、うまく拾ってくれません。したがって、設定から以下の項目を無効にしています：

- 入力感度調整
- エコー除去
- ノイズ低減
- 音量調節の自動化

実際にどの項目がどの程度効いているのか具体的には検証していませんが、とりあえずこれで問題なく配信できています。

### ボイスチャット音声とのミキシング

実際にゲーム画面を共有する際はボイスチャットもしたいので、音声をゲームの音とミックスする必要があります。ATEM Miniはオーディオミキサーとしても使えるのですが、マイク端子が3.5mmのステレオジャックしかありません。また、マイクプリアンプも出力が低く、一度適当なマイクを買って繋いでみたのですが、ゲインをかなりあげなければならず、ノイズがのってしまいました。

そこで、[YAMAHAのMG06](https://jp.yamaha.com/products/proaudio/mixers/mg_series_xu_model/index.html)というステレオミキサーをマイクプリがわりに使って、ATEM Miniへ入力しています。MG06自体はごく普通のステレオミキサーで、普通のダイナミックマイクは使えますし、ファンタム電源もあるのでコンデンサーマイクもOKです。ATEM Miniへの接続は、RCA - 3.5mmステレオケーブルを使っています。

なお、マイクは[SHURE SM58](https://www.shure.com/ja-JP/products/microphones/sm58)をXLRで接続して使っています。このマイクはPA業界での定番マイクで、ライトユースには過分なほどの品質と信頼性があります。とはいえ、長く使いたいので思い切ってきちんとしたものを買ってみました。

ゲーム音量とマイク音声のバランスは、ミキサー側はなるべく+0dBまで出力した上で、ATEM Mini側で調節することにしています。この環境で、画質や音質は（Discordの仕様に制限されますが）誰かに特に指摘されたことはありません。

### ポイントと今後の課題

共有中のゲームの音は、映像と一緒に配信しているものの他に、テレビからも自分のプレイ用に出しています。この音がマイクに入ってしまうと、マイクが拾ったゲームの音とゲーム機から直接出力される音が、タイミングが微妙にずれて重なって共有されてしまうことになります。ですので、マイクがテレビの音をなるべく拾わないように、マイクの置き場所や指向性は確認しておくと良いと思います。

また、Discordで他の人が喋った音声をMacのスピーカーから出してしまうと、その音をマイクが拾ってしまう可能性もあります。これもなるべく避けたいので、他の人の音声はヘッドホンを使って聞くようにしています。ヘッドホンはヘッドホンオーディオをやっている関係上、オーディオ向けでもある[Audeze LCD-1](https://www.ask-corp.jp/products/audeze/headphone/lcd-1.html)ですが、これはなんでもいいでしょう。

今後の課題としては、マイクがコントローラのカチッカチッと鳴る操作音を拾ってしまうことでしょうか。これも、他人のやつが入ってくると結構気になるので、できれば配慮したいところです。

マイクのゲインを下げるという手がありますが、その分、マイクを口に近づけたり、声を大きくしたりすることが必要になります。声を大きくするのは特に集合住宅ではあまり良くありませんから、マイクの置き方などをもっと工夫する必要があるかもしません。

### 蛇足

M1 Macを使った我が家でのゲーム配信について、ざっと買いてみました。どうもこのブログは、WordPress時代に書いたこのATEM Mini関係の記事をよく読んでいただいていたようでした。その記事は移行時に全く躊躇なく消してしまって~~アクセス数が減った~~申し訳ない気持ちになったので、思い出せる限りで内容を復活させよう、というのがこの記事の趣旨です。

皆さんのお役に立ちましたら、幸いです。